enum ProposalStatus {
  PROPOSAL_STATUS_UNSPECIFIED
  PROPOSAL_STATUS_DEPOSIT_PERIOD
  PROPOSAL_STATUS_VOTING_PERIOD
  PROPOSAL_STATUS_PASSED
  PROPOSAL_STATUS_REJECTED
  PROPOSAL_STATUS_FAILED
}

model Proposal {
  id               Int            @id @default(autoincrement())
  type             String         @map("type") @db.VarChar(256)
  chainId          Int            @map("chain_id")
  proposalId       String         @map("proposal_id")
  status           ProposalStatus @default(PROPOSAL_STATUS_UNSPECIFIED)
  submitTime       DateTime       @map("submit_time") @db.Timestamptz(6)
  depositEndTime   DateTime       @map("deposit_end_time") @db.Timestamptz(6)
  votingStartTime  DateTime       @map("voting_start_time") @db.Timestamptz(6)
  votingEndTime    DateTime       @map("voting_end_time") @db.Timestamptz(6)
  tallyResult      Json?          @map("tally_result")
  finalTallyResult Json?          @map("final_tally_result")
  content          Json
  title            String
  description      String

  createdAt DateTime @default(now()) @map("created_at") @db.Timestamptz(6)

  @@unique([chainId, proposalId], map: "proposal_chain_id_proposal_id")

  chain Chain @relation("chain_proposals", fields: [chainId], references: [id])

  @@map("proposals")
}
